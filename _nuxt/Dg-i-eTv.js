import{_ as x}from"./DQxZoIO3.js";import{_ as g}from"./CAz5LjV0.js";import{_ as h}from"./B_EbJGhF.js";import{_ as b}from"./IuV7Npud.js";import{n as k,f as w,g as S,r as V,k as y,c as N,a as c,b as o,w as r,i,l as B,o as $,d as _,v as A,m as C}from"./DSw_aMUb.js";function L(t){if(t.startsWith("http")){location.href=t;return}k(t)}const T={class:"flex flex-col items-center gap-4"},U={class:"text-sm"},W=w({__name:"[ticket]",setup(t){const f=S(),a=V({"2fa_code":"",ticket:f.params.ticket}),s=y(!1);async function l(){s.value=!0;try{const e=await A(a);if(await C().login(e.staff_token),e.redirect_uri)return L(e.redirect_uri)}finally{s.value=!1}}return(e,n)=>{const u=x,m=g,d=h,p=b;return $(),N("div",T,[c("form",{class:"flex w-72 flex-col gap-2",onSubmit:B(l,["prevent"])},[o(m,{label:"Authentication code"},{default:r(()=>[o(u,{modelValue:i(a)["2fa_code"],"onUpdate:modelValue":n[0]||(n[0]=v=>i(a)["2fa_code"]=v),autofocus:""},null,8,["modelValue"])]),_:1}),o(d,{variant:"primary",class:"mt-2",loading:i(s)},{default:r(()=>[_(" Login ")]),_:1},8,["loading"])],32),c("p",U,[o(p,{to:"/auth"},{default:r(()=>[_("Sign In")]),_:1})])])}}});export{W as default};
//# sourceMappingURL=Dg-i-eTv.js.map
