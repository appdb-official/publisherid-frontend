{"version":3,"file":"change-password.B4GlTw_e.js","sources":["../../../../pages/change-password.vue"],"sourcesContent":["<template>\n  <div>\n    <v-h1>Change password</v-h1>\n    <form class=\"flex flex-col gap-5\">\n      <div class=\"flex w-72 flex-col gap-5\">\n        <v-label label=\"Current password\">\n          <v-input\n            v-model=\"form.password\"\n            type=\"password\"\n          />\n        </v-label>\n        <v-label label=\"New password\">\n          <v-input\n            v-model=\"form.new_password\"\n            type=\"password\"\n          />\n        </v-label>\n        <v-label label=\"Authentication code\">\n          <v-input v-model=\"form['2fa_code']\" />\n        </v-label>\n      </div>\n\n      <v-info>Changing of your password will log you out from all authorized applications</v-info>\n\n      <v-button\n        class=\"self-start\"\n        variant=\"primary\"\n        :loading=\"isSubmitting\"\n        @click=\"submit\"\n      >\n        Change\n      </v-button>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Payload } from \"core/types/api\"\n\nconst form = reactive<Payload<typeof changePassword>>({\n  password: \"\",\n  new_password: \"\",\n  \"2fa_code\": \"\",\n})\n\nconst isSubmitting = ref(false)\nasync function submit() {\n  isSubmitting.value = true\n\n  try {\n    const response = await changePassword(form)\n\n    const { notifySuccess } = useNotification()\n    notifySuccess(\"Your password was changed\")\n\n    form.password = \"\"\n    form.new_password = \"\"\n    form[\"2fa_code\"] = \"\"\n\n    const user = useUserStore()\n    user.login(response.staff_token)\n  } finally {\n    isSubmitting.value = false\n  }\n}\n</script>\n"],"names":["form","reactive","isSubmitting","ref","submit","response","changePassword","notifySuccess","useNotification","useUserStore"],"mappings":"ifAuCA,MAAMA,EAAOC,EAAyC,CACpD,SAAU,GACV,aAAc,GACd,WAAY,EAAA,CACb,EAEKC,EAAeC,EAAI,EAAK,EAC9B,eAAeC,GAAS,CACtBF,EAAa,MAAQ,GAEjB,GAAA,CACI,MAAAG,EAAW,MAAMC,EAAeN,CAAI,EAEpC,CAAE,cAAAO,GAAkBC,IAC1BD,EAAc,2BAA2B,EAEzCP,EAAK,SAAW,GAChBA,EAAK,aAAe,GACpBA,EAAK,UAAU,EAAI,GAENS,IACR,MAAMJ,EAAS,WAAW,CAAA,QAC/B,CACAH,EAAa,MAAQ,EACvB,CACF"}