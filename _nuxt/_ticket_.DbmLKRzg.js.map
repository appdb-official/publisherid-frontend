{"version":3,"file":"_ticket_.DbmLKRzg.js","sources":["../../../../pages/auth/recover-password/[ticket].vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col items-center gap-4\">\n    <form class=\"flex w-72 flex-col gap-2\">\n      <v-label label=\"Activation code\">\n        <v-input\n          v-model=\"form.code\"\n          autofocus\n        />\n      </v-label>\n      <v-button\n        variant=\"primary\"\n        class=\"mt-2\"\n        :loading=\"isSubmitting\"\n        @click=\"submit\"\n      >\n        Recover password\n      </v-button>\n    </form>\n\n    <div class=\"text-center text-sm\">\n      <p><NuxtLink to=\"/auth\">Sign In</NuxtLink></p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Payload } from \"core/types/api\"\n\ndefinePageMeta({\n  requiredRole: \"guest\",\n  layout: \"centered\",\n  middleware: () => {\n    const authStore = useAuthStore()\n    if (!authStore.email) {\n      return navigateTo(\"/auth/recover-password\")\n    }\n  },\n})\n\nconst route = useRoute()\nconst authStore = useAuthStore()\nconst form = reactive<Payload<typeof finishPasswordRecovery>>({\n  email: authStore.email,\n  ticket: route.params.ticket as string,\n  code: \"\",\n})\n\nconst isSubmitting = ref(false)\nasync function submit() {\n  isSubmitting.value = true\n\n  try {\n    await finishPasswordRecovery(form)\n\n    const { notifySuccess } = useNotification()\n    notifySuccess(\"Your new password was activated\")\n    navigateTo(`/auth`)\n  } finally {\n    isSubmitting.value = false\n  }\n}\n</script>\n"],"names":["route","useRoute","authStore","useAuthStore","form","reactive","isSubmitting","ref","submit","finishPasswordRecovery","notifySuccess","useNotification","navigateTo"],"mappings":"odAuCA,MAAMA,EAAQC,IACRC,EAAYC,IACZC,EAAOC,EAAiD,CAC5D,MAAOH,EAAU,MACjB,OAAQF,EAAM,OAAO,OACrB,KAAM,EAAA,CACP,EAEKM,EAAeC,EAAI,EAAK,EAC9B,eAAeC,GAAS,CACtBF,EAAa,MAAQ,GAEjB,GAAA,CACF,MAAMG,EAAuBL,CAAI,EAE3B,KAAA,CAAE,cAAAM,GAAkBC,IAC1BD,EAAc,iCAAiC,EAC/CE,EAAW,OAAO,CAAA,QAClB,CACAN,EAAa,MAAQ,EACvB,CACF"}