{"version":3,"file":"verify-identity.7FJbDZw1.js","sources":["../../../../pages/verify-identity.vue"],"sourcesContent":["<template>\n  <div>\n    <v-h1>Verify identity</v-h1>\n\n    <p v-if=\"user.data?.kyc_status === KYCStatus.Ok\">Your identity was already verified, thank you!</p>\n    <iframe\n      v-else\n      class=\"aspect-video w-full\"\n      allowfullscreen\n      allow=\"camera\"\n      :src=\"src\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { KYCStatus } from \"~/types/api\"\n\nconst user = useUserStore()\n\nconst src = ref<string>()\nif (user.data?.kyc_status !== KYCStatus.Ok) {\n  startKYCVerification().then((response) => {\n    src.value = response.iframe_uri\n  })\n}\n\nconst iframeOrigin = computed(() => {\n  if (!src.value) {\n    return \"\"\n  }\n\n  const url = new URL(src.value)\n  return url.origin\n})\n\nuseEventListener(window, \"message\", (e) => {\n  if (e.origin !== iframeOrigin.value) {\n    return\n  }\n\n  user.getData()\n})\n</script>\n"],"names":["user","useUserStore","src","ref","_a","KYCStatus","startKYCVerification","response","iframeOrigin","computed","useEventListener"],"mappings":"uSAkBA,MAAMA,EAAOC,IAEPC,EAAMC,MACRC,EAAAJ,EAAK,OAAL,YAAAI,EAAW,cAAeC,EAAU,IACjBC,EAAA,EAAE,KAAMC,GAAa,CACxCL,EAAI,MAAQK,EAAS,UAAA,CACtB,EAGG,MAAAC,EAAeC,EAAS,IACvBP,EAAI,MAIG,IAAI,IAAIA,EAAI,KAAK,EAClB,OAJF,EAKV,EAEgB,OAAAQ,EAAA,OAAQ,UAAY,GAAM,CACrC,EAAE,SAAWF,EAAa,OAI9BR,EAAK,QAAQ,CAAA,CACd"}