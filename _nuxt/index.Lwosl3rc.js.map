{"version":3,"file":"index.Lwosl3rc.js","sources":["../../../../pages/auth/recover-password/index.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col items-center gap-4\">\n    <form class=\"flex w-72 flex-col gap-2\">\n      <v-label label=\"E-mail\">\n        <v-input\n          v-model=\"form.email\"\n          type=\"email\"\n        />\n      </v-label>\n      <v-button\n        variant=\"primary\"\n        class=\"mt-2\"\n        :loading=\"isSubmitting\"\n        @click=\"submit\"\n      >\n        Recover password\n      </v-button>\n    </form>\n\n    <div class=\"text-center text-sm\">\n      <p><NuxtLink to=\"/auth\">Sign In</NuxtLink></p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Payload } from \"core/types/api\"\n\ndefinePageMeta({\n  requiredRole: \"guest\",\n  layout: \"centered\",\n})\n\nconst form = reactive<Payload<typeof startPasswordRecovery>>({\n  email: \"\",\n  \"g-recaptcha-response\": \"\",\n})\n\nconst authStore = useAuthStore()\nconst generateRecaptchaToken = useRecaptcha()\n\nconst isSubmitting = ref(false)\nasync function submit() {\n  isSubmitting.value = true\n\n  try {\n    authStore.email = form.email\n    form[\"g-recaptcha-response\"] = await generateRecaptchaToken()\n    const response = await startPasswordRecovery(form)\n\n    const { notifySuccess } = useNotification()\n    notifySuccess(\"Activation code was sent to your email\")\n    navigateTo(`/auth/recover-password/${response.ticket}`)\n  } finally {\n    isSubmitting.value = false\n  }\n}\n</script>\n"],"names":["form","reactive","authStore","useAuthStore","generateRecaptchaToken","useRecaptcha","isSubmitting","ref","submit","response","startPasswordRecovery","notifySuccess","useNotification","navigateTo"],"mappings":"8fAiCA,MAAMA,EAAOC,EAAgD,CAC3D,MAAO,GACP,uBAAwB,EAAA,CACzB,EAEKC,EAAYC,IACZC,EAAyBC,IAEzBC,EAAeC,EAAI,EAAK,EAC9B,eAAeC,GAAS,CACtBF,EAAa,MAAQ,GAEjB,GAAA,CACFJ,EAAU,MAAQF,EAAK,MAClBA,EAAA,sBAAsB,EAAI,MAAMI,IAC/B,MAAAK,EAAW,MAAMC,EAAsBV,CAAI,EAE3C,CAAE,cAAAW,GAAkBC,IAC1BD,EAAc,wCAAwC,EAC3CE,EAAA,0BAA0BJ,EAAS,MAAM,EAAE,CAAA,QACtD,CACAH,EAAa,MAAQ,EACvB,CACF"}